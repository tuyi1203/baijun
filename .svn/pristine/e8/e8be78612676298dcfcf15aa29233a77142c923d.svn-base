{{include file="$WWW_PATH/innerheader.html"}}
<body>
{{include file="$WWW_PATH/menu.html"}}
    <div class="fBn"><img src="{:T('img/fbn.jpg')}" /></div>
    {{include file="$WWW_PATH/rolling.html"}}
    <div class="wrap">
        <div class="wL">
            <div class="hd"><h3>栏目导航</h3></div>
            <div class="bd">
                <ul>
                {{include file="$WWW_PATH/gongsijianjie.html"}}
                </ul>
            </div>
        </div>
        <div class="wR">
            <div class="bread">当前位置:<a href="{:U('home/default')}">首页</a>&gt;<a href="{:U('single/intro/detail/default.html')}">公司简介</a>&gt;<span>公司荣誉</span></div>
            <div class="bd">
                <div class="imgLst">
                    <h2>公司荣誉</h2>
<script src="{:T('js/jquery.VMiddleImg.js')}"></script><!--新闻头条-->
					<div class="lst">
                        <ul>
                        {{foreach from=$list item="ls" name="imglist"}}
                        <li {{if $smarty.foreach.imglist.index % 3 == 2}}class="oth"{{/if}}><a href="{:U('single/honour/detail/default/{{$ls.id}}.html')}" target="_blank" ><div class="pic"><img src="{{$ls.url}}"  class="t-img"  img-width="{{$ls.width}}" img-height="{{$ls.height}}"/></div><p>{{$ls.title}}</p></a></li>
                        {{/foreach}}
                        </ul>
                        <div class="clear"></div>
<script>

var t_img; // 定时器
var isLoad   = true; // 控制变量
var isLoaded = 0 ;
var imgNum   = $('.lst img').length ;

$('.lst img').load(function(){
    isLoaded += 1;
});  

isImgLoad(function(){
    // 加载完成
    $(".lst .t-img").VMiddleImg({"width":200,"height":200});
});

function isImgLoad(callback){
    // 注意我的图片类名都是cover，因为我只需要处理cover。其它图片可以不管。
    // 查找所有封面图，迭代处理
    // $('.lst img').each(function(){
    //     // 找到为0就将isLoad设为false，并退出each
    //     if(this.height === 0){
    //         isLoad = false;
    //         return false;
    //     }
    // });
    // 为true，没有发现为0的。加载完毕
    if(isLoaded == imgNum){
        clearTimeout(t_img); // 清除定时器
        // 回调函数
        callback();
    // 为false，因为找到了没有加载完成的图，将调用定时器递归
    }else{
        isLoad = true;
        t_img = setTimeout(function(){
            isImgLoad(callback); // 递归扫描
        },100); // 我这里设置的是500毫秒就扫描一次，可以自己调整
    }
}

</script>
                    </div>
                </div>
                {{$pagelink}}
                {{*
                <div class="page">
                    <div class="l"><em class="green">15</em>/20</div>
                    <div class="r">
                        <a title="首页" href="javascript:void(0);" class="mwIcon">&#xf104;&#xf104;</a>
                        <a title="上一页" href="javascript:void(0);" class="mwIcon">&#xf104;</a>
                        <a href="javascript:void(0)" class="cu">1</a>
                        <a href="javascript:void(0)">2</a>
                        <a href="javascript:void(0)">3</a>
                        <a href="javascript:void(0)">4</a>
                        <a href="javascript:void(0)">5</a>
                        <a href="javascript:void(0)" class="morePage">...</a>
                        <a href="javascript:void(0)">250</a>
                        <a title="下一页" href="javascript:void(0);" class="mwIcon">&#xf105;</a>
                        <a title="尾页" href="javascript:void(0);" class="mwIcon">&#xf105;&#xf105;</a>
                    </div>
                    <div class="clear"></div>
                </div>
                *}}
            </div>
        </div>
        <div class="clear"></div>
    </div>
    {{include file="$WWW_PATH/footer.html"}}
</div>
{{include file="$WWW_PATH/floatdiv.html"}}

</body>
</html>